<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        #quiz {
            width: 80%;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .question {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        .answers {
            list-style-type: none;
            padding: 0;
        }
        .answer {
            padding: 10px;
            border: 1px solid #ddd;
            margin-bottom: 5px;
            cursor: pointer;
            border-radius: 4px;
        }
        .answer.correct {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .answer.incorrect {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .answer.correct-final {
            background-color: #d4edda;
            border-color: #c3e6cb;
        }
        .answer.incorrect-final {
            background-color: #f8d7da;
            border-color: #f5c6cb;
        }
        .button {
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
        }
        .button:hover {
            background-color: #0056b3;
        }
        .result, .review {
            font-size: 1.2em;
            margin-bottom: 20px;
        }
        #restart, #next, #review {
            display: none;
        }
        .review-mode .answer {
            cursor: default;
        }
    </style>
</head>
<body>
    <div id="quiz"></div>
    <button id="next" class="button">Próxima Pergunta</button>
    <button id="restart" class="button">Reiniciar Quiz</button>
    <button id="review" class="button">Revisar Perguntas</button>
    <script>
        const questions = [
            // (seus dados de perguntas e respostas aqui)
        ];

        let currentQuestionIndex = 0;
        let shuffledQuestions = [];
        let answers = []; // Para armazenar respostas do usuário

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function showQuestion(question) {
            const quizDiv = document.getElementById('quiz');
            quizDiv.innerHTML = `
                <div class="question">${question.question}</div>
                <ul class="answers">
                    ${question.answers.map((answer, index) => `
                        <li class="answer" data-index="${index}" data-correct="${answer.correct}">${answer.text}</li>
                    `).join('')}
                </ul>
            `;
        }

        function handleAnswerClick(event) {
            if (event.target.classList.contains('answer')) {
                const isCorrect = event.target.getAttribute('data-correct') === 'true';
                const index = event.target.getAttribute('data-index');
                
                answers[currentQuestionIndex] = { index, isCorrect };

                const allAnswers = document.querySelectorAll('.answer');
                allAnswers.forEach(answer => {
                    if (answer.getAttribute('data-correct') === 'true') {
                        answer.classList.add('correct');
                    } else {
                        answer.classList.add('incorrect');
                    }
                    answer.removeEventListener('click', handleAnswerClick);
                });

                if (isCorrect) {
                    event.target.classList.add('correct');
                } else {
                    event.target.classList.add('incorrect');
                }

                document.getElementById('next').style.display = 'block';
                document.getElementById('review').style.display = 'none';
            }
        }

        function showResult() {
            const quizDiv = document.getElementById('quiz');
            quizDiv.innerHTML = `
                <div class="result">
                    <h2>Fim do Quiz!</h2>
                    <p>Clique em "Reiniciar Quiz" para jogar novamente ou "Revisar Perguntas" para ver as respostas.</p>
                    <div class="review">
                        ${shuffledQuestions.map((question, index) => `
                            <div class="question">${question.question}</div>
                            <ul class="answers">
                                ${question.answers.map((answer, i) => `
                                    <li class="answer ${answers[index] && answers[index].index == i ? 
                                        (answer.correct ? 'correct-final' : 'incorrect-final') 
                                        : ''}" data-index="${i}">
                                        ${answer.text}
                                    </li>
                                `).join('')}
                            </ul>
                        `).join('')}
                    </div>
                </div>
            `;
            document.querySelector('#quiz').classList.add('review-mode');
            document.getElementById('restart').style.display = 'block';
            document.getElementById('review').style.display = 'none';
            document.getElementById('next').style.display = 'none';
        }

        function restartQuiz() {
            currentQuestionIndex = 0;
            shuffleArray(questions);
            shuffledQuestions = [...questions];
            answers = [];
            showQuestion(shuffledQuestions[currentQuestionIndex]);
            document.getElementById('restart').style.display = 'none';
            document.getElementById('next').style.display = 'block';
            document.getElementById('review').style.display = 'none';
            document.querySelector('#quiz').classList.remove('review-mode');
        }

        function showReview() {
            const quizDiv = document.getElementById('quiz');
            quizDiv.innerHTML = `
                <div class="review">
                    ${shuffledQuestions.map((question, index) => `
                        <div class="question">${question.question}</div>
                        <ul class="answers">
                            ${question.answers.map((answer, i) => `
                                <li class="answer ${answers[index] && answers[index].index == i ? 
                                    (answer.correct ? 'correct-final' : 'incorrect-final') 
                                    : ''}" data-index="${i}">
                                    ${answer.text}
                                </li>
                            `).join('')}
                        </ul>
                    `).join('')}
                </div>
            `;
            document.querySelector('#quiz').classList.add('review-mode');
            document.getElementById('next').style.display = 'none';
            document.getElementById('review').style.display = 'none';
        }

        function handleNextClick() {
            currentQuestionIndex++;
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion(shuffledQuestions[currentQuestionIndex]);
            } else {
                showResult();
            }
        }

        document.getElementById('next').addEventListener('click', handleNextClick);
        document.getElementById('restart').addEventListener('click', restartQuiz);
        document.getElementById('review').addEventListener('click', showReview);

        // Iniciar o quiz ao carregar a página
        shuffleArray(questions);
        shuffledQuestions = [...questions];
        showQuestion(shuffledQuestions[currentQuestionIndex]);
        document.querySelector('#quiz').addEventListener('click', handleAnswerClick);
    </script>
</body>
</html>
